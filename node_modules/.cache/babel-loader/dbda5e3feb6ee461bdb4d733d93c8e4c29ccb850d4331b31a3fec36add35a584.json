{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\nimport { Modal, Alert } from 'bootstrap';\nimport FoodicsSecondaryBtn from '../buttons/FoodicsSecondaryBtn.vue';\nimport FoodicsTertiaryBtn from '../buttons/FoodicsTertiaryBtn.vue';\nexport default {\n  name: 'TimeSlotsField',\n  components: {\n    FoodicsSecondaryBtn,\n    FoodicsTertiaryBtn\n  },\n  props: {\n    label: {\n      type: String,\n      required: true\n    },\n    name: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: Array,\n      required: true,\n      default: () => []\n    },\n    handleChange: {\n      type: Function,\n      required: true\n    }\n  },\n  data() {\n    return {\n      tempStartTime: '',\n      tempEndTime: '',\n      modal: null\n    };\n  },\n  computed: {\n    displayValue() {\n      if (!this.value.length) return '';\n      return this.value.map(period => this.formatPeriod(period)).join(', ');\n    }\n  },\n  mounted() {\n    this.modal = new Modal(document.getElementById(`timeSelectModal-${this.name}`));\n  },\n  methods: {\n    openTimeSelector() {\n      this.tempStartTime = '';\n      this.tempEndTime = '';\n      this.modal.show();\n    },\n    closeModal() {\n      if (this.modal) {\n        this.modal.hide();\n        this.tempStartTime = '';\n        this.tempEndTime = '';\n      }\n    },\n    formatPeriod(period) {\n      // Convert 24h times to 12h format for display\n      const formatTime = time => {\n        const [hours, minutes] = time.split(':');\n        const hour = parseInt(hours);\n        const ampm = hour >= 12 ? 'PM' : 'AM';\n        const hour12 = hour % 12 || 12;\n        return `${hour12}:${minutes} ${ampm}`;\n      };\n      return `${formatTime(period.start)} - ${formatTime(period.end)}`;\n    },\n    removePeriod(index) {\n      const newValue = [...this.value];\n      newValue.splice(index, 1);\n      this.handleChange({\n        target: {\n          name: this.name,\n          value: newValue\n        }\n      });\n    },\n    handleCancel() {\n      this.closeModal();\n    },\n    handleSave() {\n      if (this.tempStartTime && this.tempEndTime && this.tempStartTime < this.tempEndTime) {\n        const newPeriod = {\n          start: this.tempStartTime,\n          end: this.tempEndTime\n        };\n        const newValue = [...this.value, newPeriod];\n        this.handleChange({\n          target: {\n            name: this.name,\n            value: newValue\n          }\n        });\n        this.closeModal();\n      } else if (this.tempStartTime && this.tempEndTime && this.tempStartTime < this.tempEndTime) {\n        const alertPlaceholder = document.getElementById('liveAlertPlaceholder');\n        const alert = document.createElement('div');\n        alert.className = 'alert alert-danger alert-dismissible fade show';\n        alert.setAttribute('role', 'alert');\n        alert.innerHTML = `\n        Start time must be before end time\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\n      `;\n        alertPlaceholder.append(alert);\n        setTimeout(() => {\n          const bsAlert = new Alert(alert);\n          bsAlert.close();\n        }, 3000);\n      }\n    }\n  }\n};","map":{"version":3,"names":["Modal","Alert","FoodicsSecondaryBtn","FoodicsTertiaryBtn","name","components","props","label","type","String","required","value","Array","default","handleChange","Function","data","tempStartTime","tempEndTime","modal","computed","displayValue","length","map","period","formatPeriod","join","mounted","document","getElementById","methods","openTimeSelector","show","closeModal","hide","formatTime","time","hours","minutes","split","hour","parseInt","ampm","hour12","start","end","removePeriod","index","newValue","splice","target","handleCancel","handleSave","newPeriod","alertPlaceholder","alert","createElement","className","setAttribute","innerHTML","append","setTimeout","bsAlert","close"],"sources":["src/View/components/ui/fields/TimeSlotsField.vue"],"sourcesContent":["<template>\n  <div class=\"form-group w-100\">\n    <label :for=\"name\" class=\"form-label\">{{ label }}</label>\n    \n    <div class=\"input-group\" @click=\"openTimeSelector\">\n      <input \n        type=\"text\"\n        class=\"form-control\" \n        :id=\"name\"\n        :name=\"name\"\n        :value=\"displayValue\"\n        readonly\n        placeholder=\"Click to select time slots\"\n      >\n      <span class=\"input-group-text\">\n        <i class=\"bi bi-clock\"></i>\n      </span>\n    </div>\n\n    <div class=\"mt-2\">\n      <div v-for=\"(period, index) in value\" :key=\"index\" class=\"badge bg-secondary me-2 mb-2\">\n        {{ formatPeriod(period) }}\n        <i class=\"bi bi-x-circle ms-1\" style=\"cursor: pointer\" @click=\"removePeriod(index)\"></i>\n      </div>\n    </div>\n\n    <!-- Bootstrap Modal for Time Selection -->\n    <div class=\"modal fade\" :id=\"`timeSelectModal-${name}`\" tabindex=\"-1\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Select Time Period</h5>\n            <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"row\">\n              <div class=\"col-6\">\n                <label>Start Time</label>\n                <input \n                  type=\"time\" \n                  class=\"form-control\" \n                  v-model=\"tempStartTime\"\n                  :max=\"tempEndTime\"\n                >\n              </div>\n              <div class=\"col-6\">\n                <label>End Time</label>\n                <input \n                  type=\"time\" \n                  class=\"form-control\" \n                  v-model=\"tempEndTime\"\n                  :min=\"tempStartTime\"\n                >\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer row d-flex flex-row\">\n            <div class=\"text-center col-12 col-md-auto\">\n              <FoodicsTertiaryBtn :onClick=\"handleCancel\">{{ $t('cancel') }}</FoodicsTertiaryBtn>\n            </div>\n            <div class=\"col-12 col-md-auto\">\n              <FoodicsSecondaryBtn :onClick=\"handleSave\">{{ $t('save') }}</FoodicsSecondaryBtn>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Modal, Alert } from 'bootstrap'\nimport FoodicsSecondaryBtn from '../buttons/FoodicsSecondaryBtn.vue';\nimport FoodicsTertiaryBtn from '../buttons/FoodicsTertiaryBtn.vue';\n\nexport default {\n  name: 'TimeSlotsField',\n  components: {\n    FoodicsSecondaryBtn,\n    FoodicsTertiaryBtn\n  },\n  props: {\n    label: {\n      type: String,\n      required: true\n    },\n    name: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: Array,\n      required: true,\n      default: () => []\n    },\n    handleChange: {\n      type: Function,\n      required: true\n    }\n  },\n  data() {\n    return {\n      tempStartTime: '',\n      tempEndTime: '',\n      modal: null\n    }\n  },\n  computed: {\n    displayValue() {\n      if (!this.value.length) return ''\n      return this.value.map(period => this.formatPeriod(period)).join(', ')\n    }\n  },\n  mounted() {\n    this.modal = new Modal(document.getElementById(`timeSelectModal-${this.name}`))\n  },\n  methods: {\n    openTimeSelector() {\n      this.tempStartTime = ''\n      this.tempEndTime = ''\n      this.modal.show()\n    },\n    closeModal() {\n      if (this.modal) {\n        this.modal.hide()\n        this.tempStartTime = ''\n        this.tempEndTime = ''\n      }\n    },\n    formatPeriod(period) {\n      // Convert 24h times to 12h format for display\n      const formatTime = (time) => {\n        const [hours, minutes] = time.split(':')\n        const hour = parseInt(hours)\n        const ampm = hour >= 12 ? 'PM' : 'AM'\n        const hour12 = hour % 12 || 12\n        return `${hour12}:${minutes} ${ampm}`\n      }\n      return `${formatTime(period.start)} - ${formatTime(period.end)}`\n    },\n    removePeriod(index) {\n      const newValue = [...this.value]\n      newValue.splice(index, 1)\n      this.handleChange({\n        target: {\n          name: this.name,\n          value: newValue\n        }\n      })\n    },\n    handleCancel() {\n      this.closeModal()\n    },\n    handleSave() {\n      if (this.tempStartTime && this.tempEndTime && this.tempStartTime < this.tempEndTime) {\n        const newPeriod = {\n          start: this.tempStartTime,\n          end: this.tempEndTime\n        }\n        const newValue = [...this.value, newPeriod]\n        this.handleChange({\n          target: {\n            name: this.name,\n            value: newValue\n          }\n        })\n        this.closeModal()\n      } else if (this.tempStartTime && this.tempEndTime && this.tempStartTime < this.tempEndTime) {\n      const alertPlaceholder = document.getElementById('liveAlertPlaceholder')\n      const alert = document.createElement('div')\n      alert.className = 'alert alert-danger alert-dismissible fade show'\n      alert.setAttribute('role', 'alert')\n      alert.innerHTML = `\n        Start time must be before end time\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\" aria-label=\"Close\"></button>\n      `\n      alertPlaceholder.append(alert)\n      setTimeout(() => {\n        const bsAlert = new Alert(alert)\n        bsAlert.close()\n      }, 3000)\n      }\n    }\n  }\n}\n</script>\n"],"mappings":";AAuEA,SAAAA,KAAA,EAAAC,KAAA;AACA,OAAAC,mBAAA;AACA,OAAAC,kBAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAH,mBAAA;IACAC;EACA;EACAG,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAN,IAAA;MACAI,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,KAAA;MACAF,QAAA;MACAG,OAAA,EAAAA,CAAA;IACA;IACAC,YAAA;MACAN,IAAA,EAAAO,QAAA;MACAL,QAAA;IACA;EACA;EACAM,KAAA;IACA;MACAC,aAAA;MACAC,WAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACAC,aAAA;MACA,UAAAV,KAAA,CAAAW,MAAA;MACA,YAAAX,KAAA,CAAAY,GAAA,CAAAC,MAAA,SAAAC,YAAA,CAAAD,MAAA,GAAAE,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAR,KAAA,OAAAnB,KAAA,CAAA4B,QAAA,CAAAC,cAAA,yBAAAzB,IAAA;EACA;EACA0B,OAAA;IACAC,iBAAA;MACA,KAAAd,aAAA;MACA,KAAAC,WAAA;MACA,KAAAC,KAAA,CAAAa,IAAA;IACA;IACAC,WAAA;MACA,SAAAd,KAAA;QACA,KAAAA,KAAA,CAAAe,IAAA;QACA,KAAAjB,aAAA;QACA,KAAAC,WAAA;MACA;IACA;IACAO,aAAAD,MAAA;MACA;MACA,MAAAW,UAAA,GAAAC,IAAA;QACA,OAAAC,KAAA,EAAAC,OAAA,IAAAF,IAAA,CAAAG,KAAA;QACA,MAAAC,IAAA,GAAAC,QAAA,CAAAJ,KAAA;QACA,MAAAK,IAAA,GAAAF,IAAA;QACA,MAAAG,MAAA,GAAAH,IAAA;QACA,UAAAG,MAAA,IAAAL,OAAA,IAAAI,IAAA;MACA;MACA,UAAAP,UAAA,CAAAX,MAAA,CAAAoB,KAAA,OAAAT,UAAA,CAAAX,MAAA,CAAAqB,GAAA;IACA;IACAC,aAAAC,KAAA;MACA,MAAAC,QAAA,YAAArC,KAAA;MACAqC,QAAA,CAAAC,MAAA,CAAAF,KAAA;MACA,KAAAjC,YAAA;QACAoC,MAAA;UACA9C,IAAA,OAAAA,IAAA;UACAO,KAAA,EAAAqC;QACA;MACA;IACA;IACAG,aAAA;MACA,KAAAlB,UAAA;IACA;IACAmB,WAAA;MACA,SAAAnC,aAAA,SAAAC,WAAA,SAAAD,aAAA,QAAAC,WAAA;QACA,MAAAmC,SAAA;UACAT,KAAA,OAAA3B,aAAA;UACA4B,GAAA,OAAA3B;QACA;QACA,MAAA8B,QAAA,YAAArC,KAAA,EAAA0C,SAAA;QACA,KAAAvC,YAAA;UACAoC,MAAA;YACA9C,IAAA,OAAAA,IAAA;YACAO,KAAA,EAAAqC;UACA;QACA;QACA,KAAAf,UAAA;MACA,gBAAAhB,aAAA,SAAAC,WAAA,SAAAD,aAAA,QAAAC,WAAA;QACA,MAAAoC,gBAAA,GAAA1B,QAAA,CAAAC,cAAA;QACA,MAAA0B,KAAA,GAAA3B,QAAA,CAAA4B,aAAA;QACAD,KAAA,CAAAE,SAAA;QACAF,KAAA,CAAAG,YAAA;QACAH,KAAA,CAAAI,SAAA;AACA;AACA;AACA;QACAL,gBAAA,CAAAM,MAAA,CAAAL,KAAA;QACAM,UAAA;UACA,MAAAC,OAAA,OAAA7D,KAAA,CAAAsD,KAAA;UACAO,OAAA,CAAAC,KAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}