{"ast":null,"code":"import _defineProperty from \"/Users/mohammedalghamdi/Desktop/personal/career/Foodics/tech assess/foodics-test/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport BranchOverviewModel from \"@/business/models/BranchOverviewModel\";\nimport BranchTableModel from \"@/business/models/BranchTableModel\";\nimport ReservationTimeSlotModel from \"@/business/models/ReservationTimeSlotModel\";\nexport default class GetBranchesResponse {\n  /**\n   * @param {Object} jsonMap\n   * @param {boolean} doesAllowReservation\n   */\n  constructor(jsonMap, doesAllowReservation, currPge) {\n    /**\n     * @type {Array<BranchOverviewModel>}\n     */\n    _defineProperty(this, \"branches\", void 0);\n    /**\n     * @type {number}\n     */\n    _defineProperty(this, \"pagesCount\", void 0);\n    this.branches = jsonMap.data.filter(branch => branch.accepts_reservations === doesAllowReservation).map(branch => this.mapToBranchOverviewModel(branch));\n    this.pagesCount = jsonMap.links.next != null && jsonMap.links.next.includes('page=2') || currPge == 1 ? 2 : 1; // branches do not include last page info in meta unlike what is specified in pagination section, so we assume there is only one or two pages.\n  }\n\n  /**\n   * @param {Object} jsonBranch\n   * @returns {BranchOverviewModel}\n   */\n  mapToBranchOverviewModel(jsonBranch) {\n    const tables = this.mapToTables(jsonBranch);\n    const reservationsSchedule = this.mapToReservationsSchedule(jsonBranch);\n    return new BranchOverviewModel(jsonBranch.id, jsonBranch.name, jsonBranch.reference, tables, jsonBranch.reservation_duration, jsonBranch.accepts_reservations, reservationsSchedule);\n  }\n\n  /**\n   * It is a helper function to map the tables from the json to the BranchTableModel\n   * @param {Object} jsonBranch\n   * @returns {Array<BranchTableModel>}\n   */\n  mapToTables(jsonBranch) {\n    return jsonBranch.sections.map(section => section.tables.map(table => new BranchTableModel(section.name, section.id, table.name, table.id, table.accepts_reservations))).flat();\n  }\n\n  /** \n   * @param {Object} jsonBranch\n   * @returns {ReservationsScheduleModel}\n   */\n  mapToReservationsSchedule(jsonBranch) {\n    return new ReservationsScheduleModel(jsonBranch.reservations_schedule.saturday, jsonBranch.reservations_schedule.sunday, jsonBranch.reservations_schedule.monday, jsonBranch.reservations_schedule.tuesday, jsonBranch.reservations_schedule.wednesday, jsonBranch.reservations_schedule.thursday, jsonBranch.reservations_schedule.friday);\n  }\n\n  /**\n   * It is a helper method for mapToReservationsSchedule(). It maps the data for a day to an array of ReservationTimeSlotModel\n   * @param {Array<Object>} jsonDay\n   * @returns {Array<ReservationTimeSlotModel>}\n   */\n  mapToReservationDay(jsonDay) {\n    return jsonDay.map(period => new ReservationTimeSlotModel(period.start, period.end));\n  }\n}","map":{"version":3,"names":["BranchOverviewModel","BranchTableModel","ReservationTimeSlotModel","GetBranchesResponse","constructor","jsonMap","doesAllowReservation","currPge","_defineProperty","branches","data","filter","branch","accepts_reservations","map","mapToBranchOverviewModel","pagesCount","links","next","includes","jsonBranch","tables","mapToTables","reservationsSchedule","mapToReservationsSchedule","id","name","reference","reservation_duration","sections","section","table","flat","ReservationsScheduleModel","reservations_schedule","saturday","sunday","monday","tuesday","wednesday","thursday","friday","mapToReservationDay","jsonDay","period","start","end"],"sources":["/Users/mohammedalghamdi/Desktop/personal/career/Foodics/tech assess/foodics-test/src/infrastructure/foodicsAPI/dto/responses/GetBranchesReponse.js"],"sourcesContent":["import BranchOverviewModel from \"@/business/models/BranchOverviewModel\";\nimport BranchTableModel from \"@/business/models/BranchTableModel\";\nimport ReservationTimeSlotModel from \"@/business/models/ReservationTimeSlotModel\";\nexport default class GetBranchesResponse {\n\n    /**\n     * @type {Array<BranchOverviewModel>}\n     */\n    branches;\n\n    /**\n     * @type {number}\n     */\n    pagesCount;\n\n    /**\n     * @param {Object} jsonMap\n     * @param {boolean} doesAllowReservation\n     */\n    constructor(jsonMap, doesAllowReservation, currPge){ \n        this.branches = jsonMap.data.filter((branch) => branch.accepts_reservations === doesAllowReservation).map((branch) => this.mapToBranchOverviewModel(branch));\n        this.pagesCount = ((jsonMap.links.next != null && jsonMap.links.next.includes('page=2')) || currPge == 1) \n            ? 2 \n            : 1; // branches do not include last page info in meta unlike what is specified in pagination section, so we assume there is only one or two pages.\n    }\n\n    /**\n     * @param {Object} jsonBranch\n     * @returns {BranchOverviewModel}\n     */\n    mapToBranchOverviewModel(jsonBranch){\n        const tables = this.mapToTables(jsonBranch);\n        const reservationsSchedule = this.mapToReservationsSchedule(jsonBranch);\n        return new BranchOverviewModel(jsonBranch.id, jsonBranch.name, jsonBranch.reference, tables, jsonBranch.reservation_duration, jsonBranch.accepts_reservations, reservationsSchedule);\n    }\n\n    /**\n     * It is a helper function to map the tables from the json to the BranchTableModel\n     * @param {Object} jsonBranch\n     * @returns {Array<BranchTableModel>}\n     */\n    mapToTables(jsonBranch){\n        return jsonBranch.sections.map((section) => section.tables.map((table) => \n            new BranchTableModel(section.name, section.id, table.name, table.id, table.accepts_reservations))).flat();\n    }\n\n    /** \n     * @param {Object} jsonBranch\n     * @returns {ReservationsScheduleModel}\n     */\n    mapToReservationsSchedule(jsonBranch){\n        return new ReservationsScheduleModel(jsonBranch.reservations_schedule.saturday, jsonBranch.reservations_schedule.sunday, jsonBranch.reservations_schedule.monday, jsonBranch.reservations_schedule.tuesday, jsonBranch.reservations_schedule.wednesday, jsonBranch.reservations_schedule.thursday, jsonBranch.reservations_schedule.friday);\n    }\n\n    /**\n     * It is a helper method for mapToReservationsSchedule(). It maps the data for a day to an array of ReservationTimeSlotModel\n     * @param {Array<Object>} jsonDay\n     * @returns {Array<ReservationTimeSlotModel>}\n     */\n    mapToReservationDay(jsonDay){\n        return jsonDay.map((period) => new ReservationTimeSlotModel(period.start, period.end));\n    }\n\n}"],"mappings":";;;;AAAA,OAAOA,mBAAmB,MAAM,uCAAuC;AACvE,OAAOC,gBAAgB,MAAM,oCAAoC;AACjE,OAAOC,wBAAwB,MAAM,4CAA4C;AACjF,eAAe,MAAMC,mBAAmB,CAAC;EAYrC;AACJ;AACA;AACA;EACIC,WAAWA,CAACC,OAAO,EAAEC,oBAAoB,EAAEC,OAAO,EAAC;IAdnD;AACJ;AACA;IAFIC,eAAA;IAKA;AACJ;AACA;IAFIA,eAAA;IAUI,IAAI,CAACC,QAAQ,GAAGJ,OAAO,CAACK,IAAI,CAACC,MAAM,CAAEC,MAAM,IAAKA,MAAM,CAACC,oBAAoB,KAAKP,oBAAoB,CAAC,CAACQ,GAAG,CAAEF,MAAM,IAAK,IAAI,CAACG,wBAAwB,CAACH,MAAM,CAAC,CAAC;IAC5J,IAAI,CAACI,UAAU,GAAKX,OAAO,CAACY,KAAK,CAACC,IAAI,IAAI,IAAI,IAAIb,OAAO,CAACY,KAAK,CAACC,IAAI,CAACC,QAAQ,CAAC,QAAQ,CAAC,IAAKZ,OAAO,IAAI,CAAC,GAClG,CAAC,GACD,CAAC,CAAC,CAAC;EACb;;EAEA;AACJ;AACA;AACA;EACIQ,wBAAwBA,CAACK,UAAU,EAAC;IAChC,MAAMC,MAAM,GAAG,IAAI,CAACC,WAAW,CAACF,UAAU,CAAC;IAC3C,MAAMG,oBAAoB,GAAG,IAAI,CAACC,yBAAyB,CAACJ,UAAU,CAAC;IACvE,OAAO,IAAIpB,mBAAmB,CAACoB,UAAU,CAACK,EAAE,EAAEL,UAAU,CAACM,IAAI,EAAEN,UAAU,CAACO,SAAS,EAAEN,MAAM,EAAED,UAAU,CAACQ,oBAAoB,EAAER,UAAU,CAACP,oBAAoB,EAAEU,oBAAoB,CAAC;EACxL;;EAEA;AACJ;AACA;AACA;AACA;EACID,WAAWA,CAACF,UAAU,EAAC;IACnB,OAAOA,UAAU,CAACS,QAAQ,CAACf,GAAG,CAAEgB,OAAO,IAAKA,OAAO,CAACT,MAAM,CAACP,GAAG,CAAEiB,KAAK,IACjE,IAAI9B,gBAAgB,CAAC6B,OAAO,CAACJ,IAAI,EAAEI,OAAO,CAACL,EAAE,EAAEM,KAAK,CAACL,IAAI,EAAEK,KAAK,CAACN,EAAE,EAAEM,KAAK,CAAClB,oBAAoB,CAAC,CAAC,CAAC,CAACmB,IAAI,CAAC,CAAC;EACjH;;EAEA;AACJ;AACA;AACA;EACIR,yBAAyBA,CAACJ,UAAU,EAAC;IACjC,OAAO,IAAIa,yBAAyB,CAACb,UAAU,CAACc,qBAAqB,CAACC,QAAQ,EAAEf,UAAU,CAACc,qBAAqB,CAACE,MAAM,EAAEhB,UAAU,CAACc,qBAAqB,CAACG,MAAM,EAAEjB,UAAU,CAACc,qBAAqB,CAACI,OAAO,EAAElB,UAAU,CAACc,qBAAqB,CAACK,SAAS,EAAEnB,UAAU,CAACc,qBAAqB,CAACM,QAAQ,EAAEpB,UAAU,CAACc,qBAAqB,CAACO,MAAM,CAAC;EAC/U;;EAEA;AACJ;AACA;AACA;AACA;EACIC,mBAAmBA,CAACC,OAAO,EAAC;IACxB,OAAOA,OAAO,CAAC7B,GAAG,CAAE8B,MAAM,IAAK,IAAI1C,wBAAwB,CAAC0C,MAAM,CAACC,KAAK,EAAED,MAAM,CAACE,GAAG,CAAC,CAAC;EAC1F;AAEJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}